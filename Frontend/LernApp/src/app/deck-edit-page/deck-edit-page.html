<div class="page-header">
  <button (click)="goBack()" class="back-btn" aria-label="Go back">
    <svg class="back-icon" viewBox="0 0 24 24" width="18" height="18">
      <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
    </svg>
    {{ 'NAVIGATION.BACK' | translate }}
  </button>

  <button (click)="logout()" class="logout-btn" aria-label="Logout">
    <svg class="logout-icon" viewBox="0 0 24 24" width="18" height="18">
      <path
        d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"
      />
    </svg>
    {{ 'NAVIGATION.LOGOUT' | translate }}
  </button>
</div>

<main class="page-content">
  <div class="content-container">
    <h1>{{ 'DECK_EDIT.TITLE' | translate }}</h1>
    <p class="deck-id" *ngIf="deck() as currentDeck">
      {{ 'DECK_EDIT.ID_LABEL' | translate }} {{ currentDeck.name }}
    </p>

    <section class="card-form-section">
      <h2>{{ 'DECK_EDIT.ADD_CARD_TITLE' | translate }}</h2>
      <form [formGroup]="addCardForm" (ngSubmit)="onAddCard()" class="card-form">
        <div class="form-field">
          <label for="front">{{ 'DECK_EDIT.FRONT_LABEL' | translate }}</label>
          <textarea
            id="front"
            formControlName="front"
            rows="3"
            placeholder="{{ 'DECK_EDIT.FRONT_PLACEHOLDER' | translate }}"
          ></textarea>
        </div>

        <div class="form-field">
          <label for="back">{{ 'DECK_EDIT.BACK_LABEL' | translate }}</label>
          <textarea
            id="back"
            formControlName="back"
            rows="3"
            placeholder="{{ 'DECK_EDIT.BACK_PLACEHOLDER' | translate }}"
          ></textarea>
        </div>

        <div class="actions">
          <button type="submit" [disabled]="addCardForm.invalid || isAddingCard()" class="primary-btn">
            <span *ngIf="!isAddingCard()">{{ 'DECK_EDIT.ADD_CARD_BUTTON' | translate }}</span>
            <span *ngIf="isAddingCard()">{{ 'DECK_EDIT.ADDING_CARD' | translate }}</span>
          </button>
        </div>

        <p class="error" *ngIf="cardError() as errorKey">{{ errorKey | translate }}</p>
      </form>
    </section>

    <section class="cards-list-section">
      <h2>{{ 'DECK_EDIT.CARDS_TITLE' | translate }}</h2>

      <p class="loading" *ngIf="isLoadingCards()">{{ 'DECK_EDIT.CARDS_LOADING' | translate }}</p>
      <p class="placeholder" *ngIf="!isLoadingCards() && cards().length === 0">
        {{ 'DECK_EDIT.NO_CARDS' | translate }}
      </p>

      <ul class="cards-list" *ngIf="!isLoadingCards() && cards().length > 0">
        <li class="card-item" *ngFor="let card of cards()">
          <div class="card-text">
            <div class="card-front">
              <strong>{{ 'DECK_EDIT.CARD_FRONT' | translate }}</strong>
              <p>{{ card.front }}</p>
            </div>
            <div class="card-back">
              <strong>{{ 'DECK_EDIT.CARD_BACK' | translate }}</strong>
              <p>{{ card.back }}</p>
            </div>
          </div>
        </li>
      </ul>
    </section>
  </div>
</main>
