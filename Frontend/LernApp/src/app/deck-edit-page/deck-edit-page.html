<main class="page-content">
  <div class="content-container">
    <h1>{{ 'DECK_EDIT.TITLE' | translate }}</h1>
    @if (deck()) {
      <p class="deck-id">
        {{ 'DECK_EDIT.ID_LABEL' | translate }} {{ deck()?.name }}
      </p>
    }

    <section class="card-form-section">
      <h2>{{ 'DECK_EDIT.ADD_CARD_TITLE' | translate }}</h2>
      <form [formGroup]="addCardForm" (ngSubmit)="onAddCard()" class="card-form">
        <div class="form-field">
          <label for="front">{{ 'DECK_EDIT.FRONT_LABEL' | translate }}</label>
          <textarea
            id="front"
            formControlName="front"
            rows="3"
            placeholder="{{ 'DECK_EDIT.FRONT_PLACEHOLDER' | translate }}"
          ></textarea>
        </div>

        <div class="form-field">
          <label for="back">{{ 'DECK_EDIT.BACK_LABEL' | translate }}</label>
          <textarea
            id="back"
            formControlName="back"
            rows="3"
            placeholder="{{ 'DECK_EDIT.BACK_PLACEHOLDER' | translate }}"
          ></textarea>
        </div>

        <div class="actions">
          <button type="submit" [disabled]="addCardForm.invalid || isAddingCard()" class="primary-btn">
            @if (!isAddingCard()) {
              <span>{{ 'DECK_EDIT.ADD_CARD_BUTTON' | translate }}</span>
            }
            @if (isAddingCard()) {
              <span>{{ 'DECK_EDIT.ADDING_CARD' | translate }}</span>
            }
          </button>
        </div>

        @if (cardError()) {
          <p class="error">{{ cardError() | translate }}</p>
        }
      </form>
    </section>

    <section class="cards-list-section">
      <h2>{{ 'DECK_EDIT.CARDS_TITLE' | translate }}</h2>

      @if (isLoadingCards()) {
        <p class="loading">{{ 'DECK_EDIT.CARDS_LOADING' | translate }}</p>
      }
      @if (!isLoadingCards() && cards().length === 0) {
        <p class="placeholder">
          {{ 'DECK_EDIT.NO_CARDS' | translate }}
        </p>
      }

      @if (!isLoadingCards() && cards().length > 0) {
        <ul class="cards-list">
          @for (card of cards(); track card.cardId) {
            <li class="card-item">
          <div class="card-text">
            <div class="card-front">
              <strong>{{ 'DECK_EDIT.CARD_FRONT' | translate }}</strong>
              <p>{{ card.front }}</p>
            </div>
            <div class="card-back">
              <strong>{{ 'DECK_EDIT.CARD_BACK' | translate }}</strong>
              <p>{{ card.back }}</p>
            </div>
          </div>
            </li>
          }
        </ul>
      }
    </section>
  </div>
</main>
